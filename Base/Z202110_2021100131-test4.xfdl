<?xml version="1.0" encoding="utf-8"?>
<FDL version="2.1">
  <Form id="test4" width="1280" height="720" titletext="New Form" onload="test4_onload">
    <Layouts>
      <Layout height="720" width="1280">
        <Grid id="Grid00" taborder="0" left="71" top="76" width="339" height="332" binddataset="Dataset00" extendsizetype="row" oncelldblclick="Grid00_onexpanddown">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="80"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="Column0"/>
              </Band>
              <Band id="body">
                <Cell text="bind:Column0" expandshow="expr:level==0?&quot;show&quot;:&quot;&quot;" expandimage="url('theme://images/btn_expand.png')"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="Dataset00">
        <ColumnInfo>
          <Column id="Column0" type="STRING" size="256"/>
          <Column id="level" type="STRING" size="256"/>
          <Column id="gubun" type="STRING" size="256"/>
          <Column id="status" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="level">0</Col>
            <Col id="Column0">메뉴1</Col>
            <Col id="gubun">1</Col>
          </Row>
          <Row>
            <Col id="level">1</Col>
            <Col id="Column0">메뉴1-1</Col>
            <Col id="gubun">1</Col>
          </Row>
          <Row>
            <Col id="level">1</Col>
            <Col id="Column0">메뉴1-2</Col>
            <Col id="gubun">1</Col>
          </Row>
          <Row>
            <Col id="level">0</Col>
            <Col id="Column0">메뉴2</Col>
            <Col id="gubun">2</Col>
          </Row>
          <Row>
            <Col id="level">1</Col>
            <Col id="Column0">메뉴2-1</Col>
            <Col id="gubun">2</Col>
          </Row>
          <Row>
            <Col id="level">0</Col>
            <Col id="Column0">메뉴3</Col>
            <Col id="gubun">3</Col>
          </Row>
          <Row>
            <Col id="level">1</Col>
            <Col id="Column0">메뉴3-1</Col>
            <Col id="gubun">3</Col>
          </Row>
        </Rows>
      </Dataset>
    </Objects>
    <Script type="xscript5.1"><![CDATA[
this.test4_onload = function(obj:nexacro.Form,e:nexacro.LoadEventInfo)
{
	for(var i=0; i< this.Dataset00.rowcount; i++){
        if(this.Dataset00.getColumn(i,"level") != 0){
            this.Grid00.setRealRowSize(i,0);
            this.Dataset00.setColumn(i,"status",0);
        }else{
            this.Dataset00.setColumn(i,"status",0);
        }
    }
};

this.Grid00_onexpanddown = function(obj:nexacro.Grid,e:nexacro.GridMouseEventInfo)
{
    var nGubun = this.Dataset00.getColumn(e.row,"gubun");
	if(this.Dataset00.getColumn(e.row,"status") == 0){
        for(var i=0; i < this.Dataset00.rowcount; i++){
            if(this.Dataset00.getColumn(i,"gubun") == nGubun){
                if(this.Dataset00.getColumn(i,"level") != 0){
                    this.Grid00.setRealRowSize(i,24);
                    this.Dataset00.setColumn(i,"status",1);
                }else{
                    this.Dataset00.setColumn(i,"status",1);
                }
            }
        }
    }else if(this.Dataset00.getColumn(e.row,"status") == 1){
        for(var i=0; i < this.Dataset00.rowcount; i++){
            if(this.Dataset00.getColumn(i,"gubun") == nGubun){
                if(this.Dataset00.getColumn(i,"level") != 0){
                    this.Grid00.setRealRowSize(i,0);
                    this.Dataset00.setColumn(i,"status",0);
                }else{
                    this.Dataset00.setColumn(i,"status",0);
                }
            }
        }
    }
};
]]></Script>
  </Form>
</FDL>
